"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.bulkPreparedStatements = void 0;
const mapValue = (value) => {
    if (typeof value === "boolean")
        return value.toString();
    if (typeof value === "number")
        return value.toString();
    if (typeof value === "string")
        return `'${value.replace(/'/g, "''")}'`;
    if (typeof value === "object")
        return `'${JSON.stringify(value).replace(/'/g, "''")}'`;
    throw new Error(`Cannot map value ${value}`);
};
const bulkPreparedStatements = (queries) => {
    let bulkQuery = "";
    for (const { sql, values } of queries) {
        let _sql = sql;
        values === null || values === void 0 ? void 0 : values.forEach((value, idx) => {
            _sql = sql.replace(new RegExp("\\$" + (idx + 1), "g"), mapValue(value));
        });
        bulkQuery += `${_sql}\n`;
    }
    return bulkQuery;
};
exports.bulkPreparedStatements = bulkPreparedStatements;
//# sourceMappingURL=bulk-prepared-statements.js.map